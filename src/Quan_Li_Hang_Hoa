#include<vector>
#include "Product.h"
#include<fstream>
class Cart{// Giỏ hàng
    private:
        vector<Product> products;// Danh sách mặt hàng
        const int MAX_COUNT = 100;
    public:
        void addProduct(Product product);
        bool updateProduct(Product product);
        void displayBills();
        void printBills(string fileName);
};
void Cart::addProduct(Product product){// Thêm sản phẩm
    cout<<endl<<"-------------Them vao gio hang----------"<<endl;
    bool updated = updateProduct(product);
    if(!updated){
        if(products.size()>=MAX_COUNT){
            cout<<"gio hang da day, khong the them vao!";
        }
        else{
            products.push_back(product);
            cout<<"- ADD: ";
            product.displayBill();
        }
    }  
 }
bool Cart::updateProduct(Product updateProduct){// Cập nhập sản phẩm 
    bool updated = false;
    int serialNumber = 0;// Số thứ tự
    for(Product product:products){
         if(product.equalTo(updateProduct)){
             products.erase(products.begin()+serialNumber);
             products.insert(products.begin()+serialNumber,updateProduct);
             cout<<"- UPDATE:"<<endl;
             product.displayBill();
             cout<<"-->INTO:"<<endl;
             updateProduct.displayBill();
             updated = true;
             break;
         }
         serialNumber ++;
     }
    return updated;
 }
  void Cart::displayBills(){// Hiển thị hóa đơn
      cout<<endl<<"-------------Danh sach mat hang----------"<<endl;
      for(Product product:products){
          product.displayBill();
      }
  }
void Cart::printBills(string fileName){// In hóa đơn
    ofstream ofs;
    ofs.open(fileName,ios::app);
    for(Product product:products){
        ofs<<product.toString()<<"\n";
    }
    ofs.close();
}

#include<iostream>
#include<string>
using namespace std;
class Product // Mặt hàng
{
    private:
        int id, cost;
        string name;
    public:
        int getId();
        Product(int id, int cost, string name);
        bool equalTo(Product product);
        void displayBill();
        void printBillToFile();
        string toString();
};
int Product::getId(){
    return this->id;
}
Product::Product(int id, int cost, string name){// construct argument
    this->id = id;
    this->cost = cost;
    this->name = name;
}
void Product::displayBill(){
    cout<<this->toString()<<endl;
}
string Product::toString(){
    return"id: "+ std::to_string(id)+ ", name: "+name + ", cost:"+ std::to_string(cost);
}
bool Product::equalTo(Product product){
    return this->id == product.getId();
}

#include <iostream>
#include "Cart.h"
using namespace std;
int main()
{
    int billOption;
    Cart cart;
    Product product1(1, 300000, "Giay da");
    Product product2(2,60000,"Ao thun" );
    Product product3(1, 300000, "Giay vai");
    Product product4(3, 300000, "Quan kaki");
    Product product5(1, 100000, "Quan ong lue");
    cart.addProduct(product1);
    cart.addProduct(product2);
    cart.addProduct(product3);
    cart.addProduct(product4);
    cart.addProduct(product5);
    cout<<"Ban muon xuat hoa don?(nhap mot so khac 0 de xuat ra file)";
    cin>>billOption;
    if(billOption){
        cart.printBills("./src/quanlihanghoa/bills/temp.txt");
    }
    cart.displayBills();
 return 0;
}
  
  
